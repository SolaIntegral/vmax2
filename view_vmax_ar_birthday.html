<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>🎂 パパへの誕生日プレゼント — VMAX AR</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
      html,body{height:100%;margin:0;background:#111;font-family:'Hiragino Sans','ヒラギノ角ゴシック',sans-serif;overflow:hidden;}
      
      /* Lock Screen Styles */
      .lock-screen{
        position:fixed;
        top:0;left:0;
        width:100%;height:100%;
        background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
        display:flex;
        flex-direction:column;
        justify-content:center;
        align-items:center;
        z-index:1000;
        transition:all 0.8s cubic-bezier(0.4,0,0.2,1);
      }
      .lock-screen.hidden{
        opacity:0;
        visibility:hidden;
        transform:scale(0.9);
      }
      
      .lock-title{
        color:#fff;
        font:32px/1.3 'Hiragino Sans','ヒラギノ角ゴシック',sans-serif;
        text-align:center;
        margin-bottom:15px;
        text-shadow:0 2px 10px rgba(0,0,0,0.3);
        animation:titleGlow 3s ease-in-out infinite alternate;
      }
      
      .lock-subtitle{
        color:rgba(255,255,255,0.9);
        font:18px/1.4 'Hiragino Sans','ヒラギノ角ゴシック',sans-serif;
        text-align:center;
        margin-bottom:50px;
        text-shadow:0 1px 5px rgba(0,0,0,0.2);
      }
      
      .lock-key{
        width:140px;height:140px;
        background:linear-gradient(145deg,#ffd700,#ffed4e);
        border-radius:50%;
        display:flex;
        justify-content:center;
        align-items:center;
        font-size:70px;
        cursor:pointer;
        box-shadow:0 20px 40px rgba(255,215,0,0.3),inset 0 2px 10px rgba(255,255,255,0.3);
        transition:all 0.3s ease;
        animation:keyFloat 3s ease-in-out infinite;
      }
      
      .lock-key:hover{
        transform:scale(1.1);
        box-shadow:0 25px 50px rgba(255,215,0,0.4),inset 0 2px 15px rgba(255,255,255,0.4);
      }
      
      .lock-key:active{
        transform:scale(0.95);
      }
      
      .lock-hint{
        color:rgba(255,255,255,0.7);
        font:16px/1.4 'Hiragino Sans','ヒラギノ角ゴシック',sans-serif;
        text-align:center;
        margin-top:40px;
        animation:pulse 2s infinite;
      }
      
      @keyframes keyFloat{
        0%,100%{transform:translateY(0px);}
        50%{transform:translateY(-15px);}
      }
      
      @keyframes titleGlow{
        0%{text-shadow:0 2px 10px rgba(0,0,0,0.3);}
        100%{text-shadow:0 2px 20px rgba(255,255,255,0.3),0 0 30px rgba(255,215,0,0.3);}
      }
      
      @keyframes pulse{
        0%,100%{opacity:0.7;}
        50%{opacity:1;}
      }
      
      @keyframes sparkleFloat{
        0%{opacity:1;transform:translateY(0px) scale(0.5);}
        50%{opacity:1;transform:translateY(-30px) scale(1);}
        100%{opacity:0;transform:translateY(-60px) scale(0.5);}
      }
      
      /* AR Content Styles */
      .ar-content{
        opacity:0;
        transition:opacity 1s ease-in-out 0.5s;
      }
      .ar-content.show{
        opacity:1;
      }
      
      model-viewer{
        width:100%;
        height:100%;
      }
      
      .birthday-message{
        position:fixed;
        right:15px;top:15px;
        background:linear-gradient(135deg,#ff6b6b,#feca57);
        padding:20px 25px;
        border-radius:20px;
        color:#fff;
        font:18px/1.4 'Hiragino Sans','ヒラギノ角ゴシック',sans-serif;
        box-shadow:0 6px 20px rgba(255,107,107,0.4);
        animation:messageFloat 4s ease-in-out infinite;
        text-align:center;
        max-width:280px;
      }
      
      @keyframes messageFloat{
        0%,100%{transform:translateY(0px);}
        50%{transform:translateY(-8px);}
      }
      
      .ui{
        position:fixed;
        left:15px;bottom:15px;
        z-index:10;
      }
      
      .fallback{
        display:inline-block;
        padding:15px 25px;
        background:#fff;
        border-radius:15px;
        text-decoration:none;
        color:#111;
        font:16px/1.4 'Hiragino Sans','ヒラギノ角ゴシック',sans-serif;
        box-shadow:0 6px 20px rgba(0,0,0,0.3);
        transition:all 0.3s ease;
      }
      
      .fallback:hover{
        transform:translateY(-2px);
        box-shadow:0 8px 25px rgba(0,0,0,0.4);
      }
      
      .instructions{
        position:fixed;
        right:15px;bottom:15px;
        background:rgba(255,255,255,0.95);
        padding:15px 20px;
        border-radius:15px;
        color:#333;
        font:14px/1.4 'Hiragino Sans','ヒラギノ角ゴシック',sans-serif;
        max-width:220px;
        box-shadow:0 4px 15px rgba(0,0,0,0.2);
      }
      
      .credit{
        position:fixed;
        left:15px;top:15px;
        color:#ccc;
        font:12px/1.4 'Hiragino Sans','ヒラギノ角ゴシック',sans-serif;
        opacity:0.8;
        max-width:250px;
      }
      
      .credit a{color:#aaa;}
    </style>
  </head>
  <body>
    <!-- Lock Screen -->
    <div class="lock-screen" id="lockScreen">
      <div class="lock-title">🎁 パパへの特別なプレゼント 🎁</div>
      <div class="lock-subtitle">
        パパへ<br>
        ずっと欲しがってたVmaxのAR体験楽しんでね！
      </div>
      <div class="lock-key" id="unlockKey">🔑</div>
      <div class="lock-hint">✨ Vmaxの鍵をタップしてね ✨</div>
    </div>

    <!-- AR Content (initially hidden) -->
    <div class="ar-content" id="arContent">
      <model-viewer id="mv"
        src="vmax_bike_only_v2_black.glb"
        camera-controls
        ar ar-modes="scene-viewer webxr"
        ar-scale="fixed"
        camera-orbit="0deg 75deg 3m"
        min-camera-orbit="auto auto 2m"
        max-camera-orbit="auto auto 6m"
        camera-target="0m 0m 0m"
        field-of-view="30deg"
        exposure="1.2"
        shadow-intensity="1">
      </model-viewer>

      <div class="birthday-message">
        🎂 パパ、誕生日おめでとう！🎉<br>
        これからもよろしくね！✨<br>
      </div>

      <div class="ui">
        <a class="fallback" rel="ar" href="vmax_bike_only_v2_black.glb">ARで見る</a>
      </div>

      <div class="instructions">
        📱 <strong>操作方法</strong><br>
        • スマホを動かして360度見回そう<br>
        • ピンチで拡大・縮小<br>
        • ドラッグで回転<br>
        • ARボタンで現実空間に配置
      </div>

      <div class="credit">
        "V Max-on- Road- Onjaaninoja_bridge" (TG13730, CC-BY-4.0) をベースに作成
      </div>
    </div>

    <script>
      // Unlock functionality with enhanced animations
      document.getElementById('unlockKey').addEventListener('click', function() {
        const lockScreen = document.getElementById('lockScreen');
        const arContent = document.getElementById('arContent');
        
        // Add click animation with scale and rotation
        this.style.transform = 'scale(0.9) rotate(15deg)';
        this.style.background = 'linear-gradient(145deg,#ff6b6b,#feca57)';
        
        // Create celebration sparkles
        for(let i = 0; i < 12; i++) {
          setTimeout(() => {
            createCelebrationSparkle();
          }, i * 100);
        }
        
        setTimeout(() => {
          // Hide lock screen with smooth animation
          lockScreen.classList.add('hidden');
          
          // Show AR content after lock screen animation completes
          setTimeout(() => {
            arContent.classList.add('show');
          }, 400);
        }, 800);
      });

      // Enhanced sparkle effects on key hover
      const key = document.getElementById('unlockKey');
      key.addEventListener('mouseenter', function() {
        // Create gentle sparkles around the key
        for(let i = 0; i < 8; i++) {
          setTimeout(() => {
            createHoverSparkle(this);
          }, i * 150);
        }
      });

      // Create sparkles around the key on hover
      function createHoverSparkle(element) {
        const sparkle = document.createElement('div');
        sparkle.innerHTML = '✨';
        sparkle.style.position = 'fixed';
        sparkle.style.fontSize = '24px';
        sparkle.style.pointerEvents = 'none';
        sparkle.style.zIndex = '1001';
        sparkle.style.animation = 'sparkleFloat 2s ease-out forwards';
        
        const rect = element.getBoundingClientRect();
        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;
        const angle = Math.random() * 360;
        const distance = 80 + Math.random() * 40;
        
        sparkle.style.left = (centerX + Math.cos(angle) * distance) + 'px';
        sparkle.style.top = (centerY + Math.sin(angle) * distance) + 'px';
        
        document.body.appendChild(sparkle);
        
        setTimeout(() => {
          if(document.body.contains(sparkle)) {
            document.body.removeChild(sparkle);
          }
        }, 2000);
      }

      // Create celebration sparkles when unlocking
      function createCelebrationSparkle() {
        const sparkle = document.createElement('div');
        const sparkles = ['🎉', '✨', '🎊', '💖', '🌟'];
        sparkle.innerHTML = sparkles[Math.floor(Math.random() * sparkles.length)];
        sparkle.style.position = 'fixed';
        sparkle.style.fontSize = (20 + Math.random() * 15) + 'px';
        sparkle.style.pointerEvents = 'none';
        sparkle.style.zIndex = '1001';
        sparkle.style.left = Math.random() * window.innerWidth + 'px';
        sparkle.style.top = Math.random() * window.innerHeight + 'px';
        sparkle.style.animation = 'sparkleFloat 3s ease-out forwards';
        
        document.body.appendChild(sparkle);
        
        setTimeout(() => {
          if(document.body.contains(sparkle)) {
            document.body.removeChild(sparkle);
          }
        }, 3000);
      }

      // Add touch feedback for mobile devices
      key.addEventListener('touchstart', function(e) {
        e.preventDefault();
        this.style.transform = 'scale(0.95)';
      });

      key.addEventListener('touchend', function(e) {
        e.preventDefault();
        this.click();
      });

      // Prevent double-tap zoom on mobile
      let lastTouchEnd = 0;
      document.addEventListener('touchend', function(event) {
        const now = (new Date()).getTime();
        if (now - lastTouchEnd <= 300) {
          event.preventDefault();
        }
        lastTouchEnd = now;
      }, false);
    </script>
  </body>
</html>
